<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>测试高德地图旋转API</title>
    <style>
        #container { width: 100%; height: 600px; }
        #info { padding: 20px; background: #f0f0f0; }
        button { margin: 5px; padding: 10px; }
    </style>
    <script src="https://webapi.amap.com/maps?v=2.0&key=YOUR_KEY"></script>
</head>
<body>
    <div id="info">
        <h2>高德地图 setRotation 测试</h2>
        <p>当前旋转角度：<span id="rotation">0</span></p>
        <p>单位：<span id="unit">未知</span></p>
        <button onclick="testDegrees()">测试：传入90（假设是度）</button>
        <button onclick="testRadians()">测试：传入π/2（假设是弧度）</button>
        <button onclick="testNegative()">测试：传入-90</button>
        <button onclick="reset()">重置为0</button>
        <button onclick="checkRotation()">检查当前旋转值</button>
    </div>
    <div id="container"></div>

    <script>
        var map = new AMap.Map('container', {
            zoom: 15,
            center: [116.397428, 39.90923],
            rotation: 0
        });

        function updateRotation() {
            var rot = map.getRotation();
            document.getElementById('rotation').textContent = rot.toFixed(4);

            // 检查单位
            if (Math.abs(rot) > 0 && Math.abs(rot) < 0.1) {
                document.getElementById('unit').textContent = '可能是弧度（小数值）';
            } else if (Math.abs(rot) > 10) {
                document.getElementById('unit').textContent = '可能是度（大数值）';
            }
        }

        function testDegrees() {
            console.log('设置 setRotation(90) - 假设是度');
            map.setRotation(90);
            setTimeout(updateRotation, 500);
        }

        function testRadians() {
            console.log('设置 setRotation(Math.PI/2) - 假设是弧度');
            map.setRotation(Math.PI / 2);
            setTimeout(updateRotation, 500);
        }

        function testNegative() {
            console.log('设置 setRotation(-90)');
            map.setRotation(-90);
            setTimeout(updateRotation, 500);
        }

        function reset() {
            map.setRotation(0);
            setTimeout(updateRotation, 500);
        }

        function checkRotation() {
            var rot = map.getRotation();
            console.log('当前 getRotation() 返回值:', rot);
            console.log('转换为度:', rot * 180 / Math.PI);
            updateRotation();
        }

        // 初始化
        updateRotation();
    </script>
</body>
</html>
